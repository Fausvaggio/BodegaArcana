<h3>Buscar vinos similares</h3>

<form [formGroup]="form" (ngSubmit)="buscarSimilares()">
  <!-- Selectores de ejes -->
  <div class="selects">
    <label for="x">Eje X:</label>
    <select id="x" formControlName="featureX">
      <option *ngFor="let f of features" [value]="f.key">{{ f.label }}</option>
    </select>

    <label for="y">Eje Y:</label>
    <select id="y" formControlName="featureY">
      <option *ngFor="let f of features" [value]="f.key">{{ f.label }}</option>
    </select>
  </div>

  <!-- Sliders principales -->
  <div class="sliders">
    <label>Alcohol: {{ form.value.alcohol }}</label>
    <input type="range" formControlName="alcohol" min="8" max="15" step="0.1">

    <label>Acidez volátil: {{ form.value.volatile_acidity }}</label>
    <input type="range" formControlName="volatile_acidity" min="0.1" max="1.5" step="0.01">
  </div>

  <!-- Switch para activar más sliders -->
  <div class="switch">
    <label>
      <input type="checkbox" formControlName="mostrarAvanzado">
      Mostrar más características
    </label>
  </div>

  <!-- Sliders adicionales (ocultos hasta activar switch) -->
  <div class="sliders-extra" *ngIf="form.value.mostrarAvanzado">
    <label>Acidez fija: {{ form.value.fixed_acidity }}</label>
    <input type="range" formControlName="fixed_acidity" min="3" max="15" step="0.1">

    <label>Ácido cítrico: {{ form.value.citric_acid }}</label>
    <input type="range" formControlName="citric_acid" min="0" max="1" step="0.01">

    <label>Azúcar residual: {{ form.value.residual_sugar }}</label>
    <input type="range" formControlName="residual_sugar" min="0.5" max="65" step="0.1">

    <label>Cloruros: {{ form.value.chlorides }}</label>
    <input type="range" formControlName="chlorides" min="0.01" max="0.6" step="0.01">

    <label>SO₂ libre: {{ form.value.free_sulfur_dioxide }}</label>
    <input type="range" formControlName="free_sulfur_dioxide" min="1" max="72" step="1">

    <label>SO₂ total: {{ form.value.total_sulfur_dioxide }}</label>
    <input type="range" formControlName="total_sulfur_dioxide" min="6" max="289" step="1">

    <label>Densidad: {{ form.value.density }}</label>
    <input type="range" formControlName="density" min="0.990" max="1.004" step="0.001">

    <label>pH: {{ form.value.pH }}</label>
    <input type="range" formControlName="pH" min="2.5" max="4" step="0.01">

    <label>Sulfatos: {{ form.value.sulphates }}</label>
    <input type="range" formControlName="sulphates" min="0.3" max="2" step="0.01">

    <label>Tipo de vino: {{ form.value.wine_type === 0 ? 'Tinto' : 'Blanco' }}</label>
    <input type="range" formControlName="wine_type" min="0" max="1" step="1">
  </div>

  <button type="submit">Buscar Similares</button>
</form>
<div>"En este demo mostramos dos características clave —alcohol y acidez volátil— porque son de las más influyentes en la calidad del vino. El backend en realidad soporta las 12 variables del dataset, y se pueden agregar más sliders si quisiéramos dar control completo al usuario. Para la presentación lo simplificamos a estas dos para que la comparación visual sea más clara."</div>

<div #chart></div>
